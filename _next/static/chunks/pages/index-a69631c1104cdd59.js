(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{73313:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(73478)}])},73478:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return M}});var a=t(63342),i=t(79685),s=t(97706),r=t(38678),p=t(79470),o=t(96051),u=t(59444),d=t(7979),y=t(98308),l=t(770),m=t(17978),c=t(85033);let T=e=>"".concat(e.slice(0,4),"...").concat(e.slice(38));function f(e){let{data:n,handleAddCompose:t,handleRemoveCompose:i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.Z,{sx:{maxWidth:260,float:"left",marginLeft:2,marginBottom:2},children:[(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(d.Z,{component:"img",height:"240",image:n.uri,alt:"green iguana"}),(0,a.jsxs)(y.Z,{children:[(0,a.jsxs)(l.Z,{gutterBottom:!0,variant:"h5",component:"div",children:[String(n.tokenId)," #"]}),(0,a.jsx)(l.Z,{variant:"body2",color:"text.secondary",component:"div",children:(0,a.jsxs)(p.Z,{children:[(0,a.jsxs)("div",{children:["等级: ",n.level]}),(0,a.jsxs)("div",{children:["dadId: ",String(n.dadId)]}),(0,a.jsxs)("div",{children:["mumId: ",String(n.mumId)]}),(0,a.jsxs)("div",{children:["拥有者：",T(n.owner)]})]})})]})]}),(0,a.jsx)(m.Z,{children:n.check?(0,a.jsx)(c.Z,{size:"small",color:"error",onClick:()=>i(n),children:"移除合成"}):(0,a.jsx)(c.Z,{size:"small",color:"primary",onClick:()=>t(n),children:"添加合成"})})]},n.tokenId)})}var b=t(83433),v=JSON.parse('{"Lk":"0x8E092bC277B92714aD8cc672B7acb3ad4b289BDc","Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint8","name":"_val","type":"uint8"}],"name":"batchSafeMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_dadId","type":"uint256"},{"internalType":"uint256","name":"_mumId","type":"uint256"}],"name":"breed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"donkeys","outputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint8","name":"level","type":"uint8"},{"internalType":"uint256","name":"dadId","type":"uint256"},{"internalType":"uint256","name":"mumId","type":"uint256"},{"internalType":"string","name":"uri","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getDonkey","outputs":[{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint8","name":"level","type":"uint8"},{"internalType":"uint256","name":"dadId","type":"uint256"},{"internalType":"uint256","name":"mumId","type":"uint256"},{"internalType":"string","name":"uri","type":"string"}],"internalType":"struct ComposeNFT.Donkey","name":"donkey","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"getDonkeys","outputs":[{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint8","name":"level","type":"uint8"},{"internalType":"uint256","name":"dadId","type":"uint256"},{"internalType":"uint256","name":"mumId","type":"uint256"},{"internalType":"string","name":"uri","type":"string"}],"internalType":"struct ComposeNFT.Donkey[]","name":"ownerDonkey","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"}],"name":"safeMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),k=t(99673),g=t(57213);let x={address:v.Lk,abi:v.Mt},h=e=>{let{refetch:n,compose:t,setCompose:r}=e,[p,o]=(0,i.useState)(""),[u,d]=(0,i.useState)(!1),y=(e,n)=>{"clickaway"!==n&&d(!1)},{config:l}=(0,b.PJ)({...x,functionName:"breed",args:t,onError(e){var n;let t=(null==e?void 0:e.reason)||(null===(n=e.data)||void 0===n?void 0:n.message)||e.message;"missing argument: passed to contract"!=t&&(d(!0),o(t))}}),{isLoading:m,writeAsync:c}=(0,b.GG)({...l,async onSuccess(e){await e.wait(),n(),r([])}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{open:u,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:y,children:(0,a.jsx)(k.Z,{onClose:y,severity:"error",sx:{width:"100%"},children:p})}),(0,a.jsx)(g.Z,{loading:m,variant:"contained",color:"success",disabled:!c,onClick:()=>null==c?void 0:c(),children:"合成"})]})},w=e=>{let{refetch:n}=e,{address:t}=(0,b.mA)(),{isLoading:i,writeAsync:s}=(0,b.GG)({mode:"recklesslyUnprepared",...x,functionName:"safeMint",args:[t],async onSuccess(e){await e.wait(),n()}});return(0,a.jsx)(g.Z,{loading:i,variant:"outlined",color:"error",disabled:!s,onClick:()=>null==s?void 0:s(),children:"mint"})},I={address:v.Lk,abi:v.Mt};function M(){let[e,n]=(0,i.useState)([]),[t,o]=(0,i.useState)([]),{address:u}=(0,b.mA)(),[d,y]=(0,i.useState)(!1),l=(e,n)=>{"clickaway"!==n&&y(!1)},{refetch:m}=(0,b.do)({...I,functionName:"getDonkeys",args:[u],onSuccess(e){e.length>0&&o(e.map(e=>({...e,check:!1})))}}),c=a=>{if(console.log(a),e.length>=2)return y(!0);let i=t.map(e=>e.tokenId==a.tokenId?{...e,check:!0}:{...e});o(i),n([...e,a.tokenId])},T=a=>{let i=t.map(e=>e.tokenId==a.tokenId?{...e,check:!1}:{...e});o(i),n(e.filter(e=>a.tokenId!=e))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{open:d,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:l,message:"最多只能选择两个NFT进行合成!"}),(0,a.jsxs)(r.Z,{direction:"row",spacing:2,sx:{justifyContent:"center",marginTop:2},children:[(0,a.jsx)(h,{refetch:m,compose:e,setCompose:n}),(0,a.jsx)(w,{refetch:m})]}),(0,a.jsx)(p.Z,{sx:{padding:4},children:t.map(e=>(0,a.jsx)(f,{data:e,handleAddCompose:c,handleRemoveCompose:T},e.tokenId))})]})}}},function(e){e.O(0,[644,774,888,179],function(){return e(e.s=73313)}),_N_E=e.O()}]);